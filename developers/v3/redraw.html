<h1>층 변경하여 지도 다시 그리기 </h1>
</br>
<h4>MapDraw.redrawMap()으로 층을 변경하여 지도를 그립니다.</h4>
</br>indoorMapApi.MapView를 이용하여 지도를 그린 후에 층을 변경하고자 하는 경우에는 층만 변경하면 다시 그리면 됩니다.
</br>이 때 사용자로부터 층을 선택받기 위한 UI는 직접 구현해야 합니다.
</br>MapDraw는 MapView API를 호출시 Response로 반환되며 여기에 맵이름, 층정보, poi정보, 테마정보 등이 속성으로 들어있으며 지도를 제어하기 위한 메소드들도 있습니다.
</br>MapDraw에 대한 자세한 정보는 <a href="https://dabeeo.github.io/web_api/jsdocs/MapDraw.html" target="_blank">[API Reference의 MapDraw]</a>에 설명되어 있으며
</br>MapDraw.redrawap()에 대한 정보는 <a href="https://dabeeo.github.io/web_api/jsdocs/MapDraw.html#redrawMap" target="_blank">[API Reference의 MapDraw.redrawMap()]</a>을 참조하세요
<p>
<pre>
    <code>
        mapDraw.redrawMap({ floor: e.target.value }); //층변경하여 지도 다시 그리기
    </code>
</pre>
</br>층을 변경하여 지도를 다시 그리기 위한 실행 코드는 아래와 같습니다.
<br>실행 페이지와 전체 코드는 <a href="https://dabeeo.github.io/web_api/example/#floor">[examples floor]</a>를 참조하세요.
<pre>
    <code>
        <div class="button-container">
            <button type="button" class="button-menu">
              floor
            </button>
        </div>
        <div class="control-container">
            <div class="inline-container">
              <select type="text" class="inline-input" name="floor">
                <option selected value="default">default</option>
              </select>
            </div>
        </div>
        
        <div id="map"></div>
        <script>
            window.addEventListener("load", function () {
                initMap();
            });

            function initMap () {
                let mapContainer = document.getElementById('map'); // 지도를 표시할 div

                // 지도 인증정보
                let authorization = new indoorMapApi.Authorization({
                    clientId: "6Lwuu9wa4wta0NiHwy1fO5",
                    clientSecret: "93ab5dbaf7fa6c9017cf9cb9ef4dc8fd"
                });

                let mapOptions = {
                    authorization: authorization
                };

                // 지도를 표시할 div, 옵션으로 생성 후 로딩이 완료되면 콜백으로 결과를 리턴합니다
                new indoorMapApi.MapView(
                    mapContainer, // 컨테이너
                    mapOptions, // 옵션
                    function (response) { // 맵 로드 콜백
                        let code = response.getCode();

                        if (code === 200) {
                            mapDraw = response.getPayload().mapDraw;
                            // do something
                            console.log("map view success!")
                            handleFloorInfo(mapDraw.response);
                        }
                    }
                );
            };
            //////////////////////////////////////////////////////////////////////////////////
            //지도 층 정보 처리
            function handleFloorInfo (response) {
                let floorElement = document.querySelector("[name='floor']");
                let floorInfo = response.floorInfo;
                // 옵션창에 층 추가하기

                for (let index = 0; index < floorInfo.length; index++) {
                    let floor = floorInfo[index];
                    let newOption = document.createElement("option");
                    newOption.value = floor.id;
                    if (floor.defaultYn == true) {
                        newOption.selected = true; //지도에 설정된 디폴트 층을 가져옴
                    }
                    newOption.appendChild(document.createTextNode(floor.name[0].text));
                    floorElement.appendChild(newOption);
                }
                floorElement.addEventListener("change", function (e) {
                    console.log(e.target.value);
                    mapDraw.redrawMap({ floor: e.target.value }); //층변경하여 지도 다시 그리기 
                });
            }
        </script>
    </code>
</pre>

</br>실행화면은 다음과 같습니다.
</br>
<iframe src="https://dabeeo.github.io/web_api/samples/floor.html"></iframe>
</br>
</br>
</br>
</br>
</br>
</br>
</br>